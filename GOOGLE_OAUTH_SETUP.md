# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google OAuth –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏

## ‚ö†Ô∏è –û—à–∏–±–∫–∞ "invalid_client" - —á—Ç–æ –¥–µ–ª–∞—Ç—å?

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É "The OAuth client was not found" –∏–ª–∏ "invalid_client", —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ Google OAuth –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –°–ª–µ–¥—É–π—Ç–µ —ç—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:

## üìã –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Google Cloud Console

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ** –Ω–∞ [Google Cloud Console](https://console.cloud.google.com/)
2. **–í–æ–π–¥–∏—Ç–µ** –≤ —Å–≤–æ–π Google –∞–∫–∫–∞—É–Ω—Ç
3. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç**:
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤–≤–µ—Ä—Ö—É
   - –í—ã–±–µ—Ä–∏—Ç–µ "New Project"
   - –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ: `Social Marketplace`
   - –ù–∞–∂–º–∏—Ç–µ "Create"

## üîß –®–∞–≥ 2: –í–∫–ª—é—á–µ–Ω–∏–µ Google+ API

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ** –≤ "APIs & Services" > "Library"
2. **–ù–∞–π–¥–∏—Ç–µ** "Google+ API" –≤ –ø–æ–∏—Å–∫–µ
3. **–ù–∞–∂–º–∏—Ç–µ** –Ω–∞ "Google+ API"
4. **–ù–∞–∂–º–∏—Ç–µ** "Enable" (–í–∫–ª—é—á–∏—Ç—å)

## üîë –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ OAuth 2.0 —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ** –≤ "APIs & Services" > "Credentials"
2. **–ù–∞–∂–º–∏—Ç–µ** "Create Credentials" > "OAuth 2.0 Client IDs"
3. **–í—ã–±–µ—Ä–∏—Ç–µ** —Ç–∏–ø –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è "Web application"
4. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É**:
   - **Name**: `Social Marketplace`
   - **Authorized JavaScript origins**:
     ```
     http://localhost:3000
     ```
   - **Authorized redirect URIs**:
     ```
     http://localhost:8000/api/auth/google/callback
     ```
5. **–ù–∞–∂–º–∏—Ç–µ** "Create"

## üìù –®–∞–≥ 4: –ü–æ–ª—É—á–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:
- **Client ID** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `123456789-abcdef.apps.googleusercontent.com`)
- **Client Secret** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `GOCSPX-abcdefghijklmnop`)

**‚ö†Ô∏è –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ!**

## ‚öôÔ∏è –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

1. **–û—Ç–∫—Ä–æ–π—Ç–µ** —Ñ–∞–π–ª `backend/config.env`
2. **–ó–∞–º–µ–Ω–∏—Ç–µ** –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –≤–∞—à–∏:
   ```env
   GOOGLE_CLIENT_ID=–≤–∞—à-—Ä–µ–∞–ª—å–Ω—ã–π-client-id
   GOOGLE_CLIENT_SECRET=–≤–∞—à-—Ä–µ–∞–ª—å–Ω—ã–π-client-secret
   GOOGLE_CALLBACK_URL=http://localhost:8000/api/auth/google/callback
   ```

## üîÑ –®–∞–≥ 6: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤

1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ** –±—ç–∫–µ–Ω–¥ (Ctrl+C)
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ** –∑–∞–Ω–æ–≤–æ:
   ```bash
   cd backend
   npm start
   ```

## üß™ –®–∞–≥ 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–û—Ç–∫—Ä–æ–π—Ç–µ** http://localhost:3000
2. **–ù–∞–∂–º–∏—Ç–µ** "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
3. **–í—ã–±–µ—Ä–∏—Ç–µ** "Google" –¥–ª—è –≤—Ö–æ–¥–∞
4. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ** –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –≤ Google
5. **–í—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å** –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: 
- **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ** `config.env` –≤ Git
- **–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** HTTPS
- **–û–±–Ω–æ–≤–∏—Ç–µ redirect URIs** –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã**

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ "redirect_uri_mismatch"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ redirect URI –≤ Google Console —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `GOOGLE_CALLBACK_URL`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤

### –û—à–∏–±–∫–∞ "invalid_client"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Client ID –∏ Client Secret
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –≤–∫–ª—é—á–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç –≤—ã–±—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –û—à–∏–±–∫–∞ CORS
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –≤ `backend/src/app.js`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ http://localhost:3000

## üåê –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

1. **–û–±–Ω–æ–≤–∏—Ç–µ Authorized origins**:
   ```
   https://yourdomain.com
   ```
2. **–û–±–Ω–æ–≤–∏—Ç–µ Redirect URIs**:
   ```
   https://yourdomain.com/api/auth/google/callback
   ```
3. **–í–∫–ª—é—á–∏—Ç–µ HTTPS** –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–µ—Å—Å–∏–π
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —à–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —Ç–æ—á–Ω–æ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –≤–∫–ª—é—á–µ–Ω –≤ Google Cloud Console
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä—ã –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## –®–∞–≥ 8: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ó–∞–ø—É—Å—Ç–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è `google_id`:

```sql
-- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ google_id –≤ —Ç–∞–±–ª–∏—Ü—É users
ALTER TABLE users ADD COLUMN IF NOT EXISTS google_id VARCHAR(100) UNIQUE;

-- –°–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
CREATE INDEX IF NOT EXISTS idx_users_google_id ON users(google_id);
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
1. –û–±–Ω–æ–≤–∏—Ç–µ Authorized origins:
   ```
   https://yourdomain.com
   ```
2. –û–±–Ω–æ–≤–∏—Ç–µ Redirect URIs:
   ```
   https://yourdomain.com/api/auth/google/callback
   ```
3. –í–∫–ª—é—á–∏—Ç–µ HTTPS –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–µ—Å—Å–∏–π
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤ 