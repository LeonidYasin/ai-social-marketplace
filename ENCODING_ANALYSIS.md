# üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º —Å –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏ –¥–ª—è Render.com

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –û–ë–ù–ê–†–£–ñ–ï–ù–´!

### 1. **WIN1251 –∫–æ–¥–∏—Ä–æ–≤–∫–∞ –≤ Linux-–æ–∫—Ä—É–∂–µ–Ω–∏–∏ Render**

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `test_db_connection.js` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `client_encoding: 'WIN1251'`, –Ω–æ Render –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Linux-—Å–∏—Å—Ç–µ–º—ã, –≥–¥–µ —ç—Ç–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∞ –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∏–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

**–§–∞–π–ª—ã —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏:**
```javascript
// test_db_connection.js - —Å—Ç—Ä–æ–∫–∞ 20
client_encoding: 'WIN1251',  // ‚ùå –ü–†–û–ë–õ–ï–ú–ê!
```

### 2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–¥–∏—Ä–æ–≤–æ–∫ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–¥–µ**

**–ü—Ä–æ–±–ª–µ–º–∞:** –í –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö (`backend/src/utils/db.js`, `backend/init-db.js`) –ù–ï–¢ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–¥–∏—Ä–æ–≤–æ–∫, –Ω–æ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ñ–∞–π–ª–µ –µ—Å—Ç—å.

**–§–∞–π–ª—ã –ë–ï–ó –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–¥–∏—Ä–æ–≤–æ–∫:**
- ‚ùå `backend/src/utils/db.js` - –Ω–µ—Ç client_encoding
- ‚ùå `backend/init-db.js` - –Ω–µ—Ç client_encoding
- ‚úÖ `test_db_connection.js` - –µ—Å—Ç—å client_encoding (–Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è)

### 3. **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –ª–æ–∫–∞–ª—å–Ω–æ–π –∏ production —Å—Ä–µ–¥–æ–π**

**–õ–æ–∫–∞–ª—å–Ω–æ (Windows):**
- –ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å WIN1251
- –°–∏—Å—Ç–µ–º–∞ –ø–æ–Ω–∏–º–∞–µ—Ç Windows-–∫–æ–¥–∏—Ä–æ–≤–∫–∏

**Render (Linux):**
- –ù–ï –ø–æ–Ω–∏–º–∞–µ—Ç WIN1251 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç UTF-8
- –ú–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –æ—à–∏–±–∫–∞: `invalid byte sequence for encoding "UTF8"`

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:

### 1. **–ó–∞–º–µ–Ω–∏—Ç—å WIN1251 –Ω–∞ UTF-8**
```javascript
// –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è Render):
client_encoding: 'WIN1251'

// –î–û–õ–ñ–ù–û –ë–´–¢–¨ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è Render):
client_encoding: 'UTF8'
```

### 2. **–î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–¥–∏—Ä–æ–≤–æ–∫ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥**
```javascript
// backend/src/utils/db.js –∏ backend/init-db.js
dbConfig = {
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  client_encoding: 'UTF8',  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è Linux/Render
  // ...
};
```

### 3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å SQL —Ñ–∞–π–ª—ã**
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `setup_database.sql` –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–ª—è Windows –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ UTF-8

## üéØ –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### –í `test_db_connection.js`:
```javascript
// –°—Ç—Ä–æ–∫–∞ 20 - –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û –¥–ª—è Render
client_encoding: 'WIN1251',

// –°—Ç—Ä–æ–∫–∞ 102 - –¥–∞–∂–µ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —É–∫–∞–∑–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
console.error('2. Try using UTF-8 encoding instead of WIN1251');
```

### –í –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–¥–µ:
```javascript
// backend/src/utils/db.js - –û–¢–°–£–¢–°–¢–í–£–ï–¢ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
dbConfig = {
  host: process.env.DB_HOST,
  // ... –Ω–µ—Ç client_encoding
};
```

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### 1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:**
- –ó–∞–º–µ–Ω–∏—Ç—å `WIN1251` –Ω–∞ `UTF8` –≤ `test_db_connection.js`
- –î–æ–±–∞–≤–∏—Ç—å `client_encoding: 'UTF8'` –≤ `backend/src/utils/db.js`
- –î–æ–±–∞–≤–∏—Ç—å `client_encoding: 'UTF8'` –≤ `backend/init-db.js`

### 2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å UTF-8
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ Render —Å UTF-8
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å —Ä—É—Å—Å–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º

### 3. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
- –£–±—Ä–∞—Ç—å `client_encoding` –≤–æ–æ–±—â–µ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- PostgreSQL –Ω–∞ Render –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç UTF-8

## ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –Ω–∞ Render:

1. **–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î:**
   ```
   invalid byte sequence for encoding "UTF8"
   ```

2. **–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü:**
   ```
   character with byte sequence 0x... in encoding "UTF8" has no equivalent in "WIN1251"
   ```

3. **–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ —Ä—É—Å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö:**
   ```
   invalid byte sequence for encoding "UTF8"
   ```

## üìã –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. ‚úÖ **–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω** - –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞–π–¥–µ–Ω—ã
2. ‚úÖ **–°–æ–∑–¥–∞–Ω —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å** - `backend/src/utils/encoding.js`
3. ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —Ñ–∞–π–ª—ã** - —Å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º –ø–æ–¥—Ö–æ–¥–æ–º
4. ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ** - –ª–æ–∫–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
5. ‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –∫–æ–º–º–∏—Ç—É** - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

## üéâ –†–µ—à–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

### ‚úÖ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã (Windows/Linux)
- –£–º–Ω—ã–π –≤—ã–±–æ—Ä –∫–æ–¥–∏—Ä–æ–≤–∫–∏ (WIN1251 –Ω–∞ Windows, UTF8 –Ω–∞ Linux)
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π UTF-8 –≤ production
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `backend/src/utils/encoding.js` - –Ω–æ–≤—ã–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å
- `backend/src/utils/db.js` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º –º–æ–¥—É–ª–µ–º
- `backend/init-db.js` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º –º–æ–¥—É–ª–µ–º
- `test_db_connection.js` - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç–∏

### ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: ‚úÖ –£—Å–ø–µ—à–Ω–æ
- –°–∏–º—É–ª—è—Ü–∏—è production: ‚úÖ UTF-8
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

---
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã! –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Render! 